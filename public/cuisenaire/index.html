<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8' />
  <title>Cuisenaire environment</title>

<style>
.frame { 
  width: 702px; 
  height: 600px; 
}
</style>
</head>

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<link rel="stylesheet" href="../nrich/nrich-1.0.2.css" />
<link rel="stylesheet" href="styles.0a1a8b9be44221e5.css" />

<script src="../nrich/nrich-1.0.2.js"></script>
<script src="../nrich/parseUri.js"></script>

<script>

$().ready(function(){

  "use strict";

    var url_string = window.location;
    var url = parseUri(url_string);

    console.log(url_string);
    console.log(url);

    console.log("--------------");
    console.log(url.relative);
    console.log(url.path);

    // This simplifies the url in the window, which avoids the situation where the frame has outdated query parameters...
    // Such as when the user has reloaded the frame contents with new parameters.
    if (url.relative != url.path) {

       var h = document.body.innerHTML;
       var t = document.title;
       window.history.pushState({"html": h,"pageTitle": t}, "", url.path);
    }

    console.log("appending iframe");
    $(".goeshere").append("<iframe class='frame' src='main.html?" + url.query + "' scrolling='no' frameborder='0'></iframe>");
});

</script>

<body>
<div class="goeshere">
</div>
<a href="http://nrich.maths.org" target="_blank">
  <div id="promo-100">
    <span id="promo-text">NRICH - explore the home of rich mathematics</span>
    <div id="promo-new-window"><img src="../nrich/newwindow.png" alt="This opens in a new window"></div>
  </div>
</a>
</body>
</html>